name:             Cargo deny

on:
  pull_request:
  push:
    branches:
      - master
    tags:
      - v*
    paths-ignore:
      - 'README.md'
jobs:
## Test stage
  test:
    name:         Check
    runs-on:      ubuntu-latest
    steps:
      - name:     Checkout sources & submodules
        uses:     actions/checkout@master
      - name:     Copy deny.toml to .
        run:      cp .maintain/deny.toml deny.toml
      - name:     Check crate dependencies and validate licenses
        uses:     EmbarkStudios/cargo-deny-action@master
