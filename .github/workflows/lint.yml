name:                              Check style

on:
  pull_request:
  push:
    branches:
      - master
    tags:
      - v*
    paths-ignore:
      - 'README.md'
      - diagrams
  schedule:                        # Weekly build
    - cron:                        '0 0 * * 0'
jobs:
## Check stage
  check-fmt:
    name:                          Check RustFmt
    env:
      RUST_BACKTRACE:              full
    steps:
      - name:                      Checkout sources & submodules
        uses:                      actions/checkout@master
        with:
          fetch-depth:             5
          submodules:              recursive
      - name:                      Add rustfmt
        run:                       rustup component add rustfmt --toolchain stable
      - name:                      rust-fmt check
        uses:                      actions-rs/cargo@master
        with:
          command:                 fmt
          toolchain:               stable
          args:                    --all -- --check
