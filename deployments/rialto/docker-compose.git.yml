version: '3.5'
services:
  poa-node-arthur: &poa-node
    build:
      context: .
      dockerfile: ./OpenEthereum.Dockerfile
      args:
       # substrate-builtins-stubs branch
        ETHEREUM_HASH: 79a6e12c63815c72a0152b5deb0d9e616aa42738
        BRIDGE_HASH: ${ETH_BRIDGE_HASH:-master}

  poa-node-bertha:
    <<: *poa-node

  poa-node-carlos:
    <<: *poa-node

  relay-eth2sub:
    build:
      context: .
      dockerfile: ./Bridge.Dockerfile
      args:
        BRIDGE_HASH: ${RELAY_BRIDGE_HASH:-master}
        PROJECT: ethereum-poa-relay

  poa-exchange-tx-generator:
    build:
      context: .
      dockerfile: ./Bridge.Dockerfile
      args:
        BRIDGE_HASH: ${RELAY_BRIDGE_HASH:-master}
        PROJECT: ethereum-poa-relay

  relay-eth-exchange-sub:
    build:
      context: .
      dockerfile: ./Bridge.Dockerfile
      args:
        BRIDGE_HASH: ${RELAY_BRIDGE_HASH:-master}
        PROJECT: ethereum-poa-relay

  relay-sub2eth:
    build:
      context: .
      dockerfile: ./Bridge.Dockerfile
      args:
        BRIDGE_HASH: ${RELAY_BRIDGE_HASH:-master}
        PROJECT: ethereum-poa-relay

  bridge-node-alice: &bridge-node
    build:
      context: .
      dockerfile: ./Bridge.Dockerfile
      args:
        BRIDGE_HASH: ${NODE_BRIDGE_HASH:-master}
        PROJECT: bridge-node

  bridge-node-bob:
    <<: *bridge-node

  bridge-node-charlie:
    <<: *bridge-node

  bridge-node-dave:
    <<: *bridge-node

  bridge-node-eve:
    <<: *bridge-node
