version: '3.5'
services:
  relay-millau-headers-to-rialto:
    image: paritytech/substrate-relay
    entrypoint: /config/relay-millau-headers-to-rialto-entrypoint.sh
    volumes:
      - ./scripts:/config
    environment:
      RUST_LOG: rpc=trace,bridge=trace
    ports:
      - "9616:9616"
    depends_on: &all-nodes
      - millau-node-alice
      - millau-node-bob
      - millau-node-charlie
      - millau-node-dave
      - millau-node-eve

  prometheus-metrics:
    image: prom/prometheus:v2.20.1
    volumes:
      - ./dashboard/prometheus/:/etc/prometheus/
    ports:
      - "9090:9090"
    depends_on: *all-nodes
